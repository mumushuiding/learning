# 性能提升

## 内联函数 (Inline Functions)

### :question: 问题

函数调用,涉及操作:
  * 建立栈环境
  * 参数复制
  * 保护调用现场
  * 返回值复制

因此,若是频繁调用小函数,则这些开销会影响性能;但是,如果将小函数溶解到程序里,会降低程序的可读性.

### :heavy_check_mark: 解决方法

解决办法就是将这种小函数声明为联(inline)

内联函数的代码在程序运行时是直接嵌在调用处执行,不涉及函数调用过程

内联声明必须在调用之前.

内联函数:
  * 尽可能小,只适合 1~5行的小函数
  * 结构简单,不能含有复杂的结构控制语句,如switch和while

<a href="./chapter_6/example/f0603.cpp">代码示例</a>

以下为测试代码：但是在测试中并没有发现内联有性能的提升，只有宏定义才实现了性能提升

<a href="./chapter_6/example/f0605.cpp">测试示例</a>